<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel=stylesheet href="../css/public.css">
<style>
#result1, #result2{
	display : flex;
	flex-direction: row;
	
	width : 70%;
	height : 200px;
	background: gray;
}

.result div {
 	/* width : calc(23% - 1%); */
 	flex : 25%;
 	height : 80%;
 	background: lightgray
	
}
img {
	width : 95%;
	height : 75%;
	border : 2px dotted red;
}
</style>
</head>
<body>

<div class="box">
<h4> 각 이미지에 onclick이벤트 설정 </h4>
<br><br>
<div id="result1" class="result">
	<div><img onclick="sales(this)" src="../images/ㅇㅇㅇ.jpg" alt=""></div>
	<div><img onclick="sales(this)" src="../images/루루.png" alt=""></div>
	<div><img onclick="sales(this)" src="../images/핫초코.jpg" alt=""></div>
	<div><img onclick="sales(this)" src="../images/에스프레소.jpg" alt=""></div>
</div>
</div>

<div class="box">
<h4> js에서 이벤트 일괄등록 처리 <br>
addEventListener() </h4>
<br><br>
<div id="result2" class="result">
	<div><img src="../images/ㅇㅇㅇ.jpg" alt=""></div>
	<div><img src="../images/루루.png" alt=""></div>
	<div><img src="../images/핫초코.jpg" alt=""></div>
	<div><img src="../images/에스프레소.jpg" alt=""></div>
</div>
</div>


<script>
vptag = null;

sales = (pimg) => {
	// 이미 생성되어 있는 ptag를 삭제 -
	// 맨 최초 실행시 ptag가 없기 때문에 에러 발생
	if (vptag != null) {
		vptag.remove();
	}	
	// 랜덤 발생 5~15 사이로  random()*11+5
	rand = Math.floor(Math.random()*11+5);
	
	// ptag 생성
	vptag = document.createElement('p');
	
	// 13% 문자열 생성 - textNode 생성
	tnode = document.createTextNode(rand+"%");
	
	// p태그에 textNode를 추가 
	vptag.appendChild(tnode);
	
	// 클릭한 이미지 - this 의 부모를 검색 - parentNode
	imgParent = pimg.parentNode;
	
	// imgParent에 ptag를 추가
 	imgParent.appendChild(vptag);
 	
	
}

	vimg = document.querySelectorAll('#result2 img');
	
	imgSales = function() {
		if (vptag != null) {
			vptag.remove();
		}	
	// 랜덤 발생 5~15 사이로  random()*11+5
	rand = Math.floor(Math.random()*11+5);
	
	// ptag 생성
	vptag = document.createElement('p');
	
	// 13% 문자열 생성 - textNode 생성
	tnode = document.createTextNode(rand+"%");
	
	// p태그에 textNode를 추가 
	vptag.appendChild(tnode);
	
	// 클릭한 이미지 - this 의 부모를 검색 - parentNode
	imgParent = this.parentNode;
	
	// imgParent에 ptag를 추가
 	imgParent.appendChild(vptag);
 	
	// 더이상 클릭이벤트가his.removeEnent 발생하지 않도록 
	this.removeEventListener('click', imgSales)
	
		
	}
	for(i=0; i<vimg.length; i++) {
		//vimg[i].addEnentListener('click', function() {} )
		vimg[i].addEventListener('click', imgSales);
	}
	
	
	
</script>

</body>
</html>